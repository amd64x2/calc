<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AltÄ±n ve Dolar HesaplayÄ±cÄ±sÄ±</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1050px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            padding: 30px;
            text-align: center;
            color: white;
        }

        .header h1 {
            font-size: 2.2em;
            margin-bottom: 10px;
            font-weight: 300;
        }

        .main-content {
            padding: 30px;
        }

        .section {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
        }

        .section-title {
            font-size: 1.3em;
            color: #333;
            margin-bottom: 20px;
            border-left: 4px solid #667eea;
            padding-left: 15px;
        }

        .input-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 15px;
        }

        .input-row-three {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 15px;
            margin-bottom: 15px;
        }

        .input-group {
            display: flex;
            flex-direction: column;
        }

        .input-group label {
            font-weight: 600;
            color: #555;
            margin-bottom: 8px;
            font-size: 0.95em;
        }

        .input-group input {
            padding: 12px 15px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s ease;
            width: 100%;
            min-width: 0;
            text-align: right;
        }

        .input-group input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        /* Renk kodlarÄ± */
        .manual-tl {
            color: #e74c3c !important;
            font-weight: bold;
        }

        .manual-gold {
            color: #f39c12 !important;
            font-weight: bold;
        }

        .manual-dollar {
            color: #27ae60 !important;
            font-weight: bold;
        }

        .auto-calculated {
            color: #333 !important;
        }

        .result-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 15px;
        }

        .result-group {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .result-label {
            font-weight: 600;
            color: #555;
        }

        .result-value {
            font-size: 1.1em;
            font-weight: bold;
        }

        .change-positive {
            color: #27ae60;
        }

        .change-negative {
            color: #e74c3c;
        }

        /* Gram AltÄ±n FiyatÄ± Bilgisi */
        .gram-info {
            background: rgb(240, 245, 201);
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            text-align: center;
            font-size: 1.1em;

        }

        /* Ok iÅŸaretlerini kaldÄ±r */
        input[type=number]::-webkit-outer-spin-button,
        input[type=number]::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        input[type=number] {
            -moz-appearance: textfield;
        }

        .formul {
            font-size: 0.9em;
            color: #555;
            margin-top: 8px;
            font-weight: 700;

        }
    </style>
</head>

<body>
    <div class="container">
        <div class="header">
            <h1>ðŸ’° AltÄ±n & Dolar HesaplayÄ±cÄ±sÄ±</h1>
        </div>

        <div class="main-content">
            <!-- Mevcut Fiyatlar -->
            <div class="section">
                <div class="section-title">ðŸ“Š Mevcut Fiyatlar</div>
                <div class="input-row">
                    <div class="input-group">
                        <label>Mevcut Ons FiyatÄ± (USD)</label>
                        <input type="text" id="onsFiyat" placeholder="1.234,56"
                            oninput="formatNumber(this, true); updateCalculations();">
                    </div>
                    <div class="input-group">
                        <label>Mevcut USD/TRY Kuru</label>
                        <input type="text" id="dolarKuru" placeholder="34,56"
                            oninput="formatNumber(this, false); updateCalculations();">
                    </div>
                </div>

                <!-- Gram AltÄ±n FiyatÄ± Bilgisi -->
                <div class="gram-info">
                    <span>Gram AltÄ±n FiyatÄ±: </span>
                    <span id="gramAltinFiyati">-</span>
                    <div class="formul">Gram TL = ( Ons FiyatÄ± / 31.1035 ) Ã— Dolar Kuru</div>
                </div>

            </div>

            <!-- Ana Hesaplama -->
            <div class="section">
                
                <div class="input-row-three">
                    <div class="input-group">
                        <label>TL</label>
                        <input type="text" id="tlInput" placeholder="100.000,00"
                            oninput="formatNumber(this, true); calculateFromTL();">
                    </div>
                    <div class="input-group">
                        <label>GRAM</label>
                        <input type="text" id="gramInput" placeholder="0,0000"
                            oninput="formatNumber(this, false); calculateFromGram();">
                    </div>
                    <div class="input-group">
                        <label>DOLAR</label>
                        <input type="text" id="dolarInput" placeholder="0,00"
                            oninput="formatNumber(this, false); calculateFromDolar();">
                    </div>
                </div>
            </div>

            <!-- Gelecek Tahminleri -->
            <div class="section">
                <div class="section-title">Gelecek Tahminleri</div>
                <div class="input-row">
                    <div class="input-group">
                        <label>Tahmini Ons FiyatÄ± (USD)</label>
                        <input type="text" id="tahminOnsFiyat" placeholder="1.234,56"
                            oninput="formatNumber(this, true); updatePredictions();">
                    </div>
                    <div class="input-group">
                        <label>Tahmini USD/TRY Kuru</label>
                        <input type="text" id="tahminDolarKuru" placeholder="36,00"
                            oninput="formatNumber(this, false); updatePredictions();">
                    </div>
                </div>

                <div class="result-row">
                    <div class="result-group">
                        <span class="result-label">AltÄ±n KarÅŸÄ±lÄ±ÄŸÄ± (TL)</span>
                        <span class="result-value" id="altinTahminDeger">-</span>
                        <span class="result-value" id="altinDegisim">-</span>
                    </div>
                    <div class="result-group">
                        <span class="result-label">Dolar KarÅŸÄ±lÄ±ÄŸÄ± (TL)</span>
                        <span class="result-value" id="dolarTahminDeger">-</span>
                        <span class="result-value" id="dolarDegisim">-</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let manualInput = 'none'; // 'tl', 'gram', 'dolar'

        // SayÄ±larÄ± formatlama fonksiyonu (binlik ayraÃ§: . , ondalÄ±k ayraÃ§: ,)
        function formatNumber(input, isTLFormat) {
            let value = input.value.replace(/\./g, '').replace(/,/g, '.');

            // Sadece sayÄ± ve ondalÄ±k noktasÄ±na izin ver
            value = value.replace(/[^\d.]/g, '');

            // Birden fazla ondalÄ±k noktasÄ±nÄ± engelle
            if ((value.match(/\./g) || []).length > 1) {
                value = value.substring(0, value.lastIndexOf('.'));
            }

            // EÄŸer boÅŸsa devam etme
            if (!value) {
                input.value = '';
                return;
            }

            // OndalÄ±k kÄ±smÄ± ayÄ±r
            let parts = value.split('.');
            let integerPart = parts[0];
            let decimalPart = parts.length > 1 ? ',' + parts[1] : '';

            // TL formatÄ±nda ise 2 ondalÄ±k basamak, deÄŸilse 4 ondalÄ±k basamak
            if (isTLFormat && parts.length > 1) {
                decimalPart = ',' + parts[1].substring(0, 2);
            } else if (!isTLFormat && parts.length > 1) {
                decimalPart = ',' + parts[1].substring(0, 4);
            }

            // Binlik ayÄ±rÄ±cÄ±larÄ± ekle (nokta ile)
            integerPart = integerPart.replace(/\B(?=(\d{3})+(?!\d))/g, ".");

            // Input deÄŸerini gÃ¼ncelle
            input.value = integerPart + decimalPart;
        }

        // FormatlanmÄ±ÅŸ sayÄ±yÄ± float'a Ã§evirme
        function parseFormattedNumber(str) {
            if (!str) return NaN;
            return parseFloat(str.replace(/\./g, '').replace(/,/g, '.'));
        }

        // Gram altÄ±n fiyatÄ±nÄ± gÃ¼ncelleme
        function updateGramAltinFiyati() {
            const onsFiyat = parseFormattedNumber(document.getElementById('onsFiyat').value);
            const dolarKuru = parseFormattedNumber(document.getElementById('dolarKuru').value);

            if (!isNaN(onsFiyat) && !isNaN(dolarKuru)) {
                const gramFiyat = (onsFiyat / 31.1035) * dolarKuru;
                document.getElementById('gramAltinFiyati').textContent = formatMoney(gramFiyat);
            } else {
                document.getElementById('gramAltinFiyati').textContent = '-';
            }
        }

        function updateCalculations() {
            // Gram altÄ±n fiyatÄ±nÄ± gÃ¼ncelle
            updateGramAltinFiyati();

            // Mevcut fiyatlar deÄŸiÅŸtiÄŸinde tahmin alanlarÄ±nÄ± gÃ¼ncelle
            const onsFiyat = document.getElementById('onsFiyat').value;
            const dolarKuru = document.getElementById('dolarKuru').value;

            if (onsFiyat) document.getElementById('tahminOnsFiyat').value = onsFiyat;
            if (dolarKuru) document.getElementById('tahminDolarKuru').value = dolarKuru;

            if (manualInput === 'tl') calculateFromTL();
            else if (manualInput === 'gram') calculateFromGram();
            else if (manualInput === 'dolar') calculateFromDolar();

            updatePredictions();
        }

        function calculateFromTL() {
    manualInput = 'tl';
    const tl = parseFormattedNumber(document.getElementById('tlInput').value);
    const onsFiyat = parseFormattedNumber(document.getElementById('onsFiyat').value);
    const dolarKuru = parseFormattedNumber(document.getElementById('dolarKuru').value);
    
    // Renk kodlarÄ±
    document.getElementById('tlInput').className = 'manual-tl';
    document.getElementById('gramInput').className = 'auto-calculated';
    document.getElementById('dolarInput').className = 'auto-calculated';
    
    if (!isNaN(tl) && !isNaN(onsFiyat) && !isNaN(dolarKuru)) {
        const gramFiyat = (onsFiyat / 31.1035) * dolarKuru;
        const gram = tl / gramFiyat;
        const dolar = tl / dolarKuru;
        
        // Otomatik hesaplanan deÄŸerleri de formatla
        document.getElementById('gramInput').value = formatGramNumber(gram);
        document.getElementById('dolarInput').value = formatDolarNumber(dolar);
    }
    updatePredictions();
}

function calculateFromGram() {
    manualInput = 'gram';
    const gram = parseFormattedNumber(document.getElementById('gramInput').value);
    const onsFiyat = parseFormattedNumber(document.getElementById('onsFiyat').value);
    const dolarKuru = parseFormattedNumber(document.getElementById('dolarKuru').value);
    
    // Renk kodlarÄ±
    document.getElementById('tlInput').className = 'auto-calculated';
    document.getElementById('gramInput').className = 'manual-gold';
    document.getElementById('dolarInput').className = 'auto-calculated';
    
    if (!isNaN(gram) && !isNaN(onsFiyat) && !isNaN(dolarKuru)) {
        const gramFiyat = (onsFiyat / 31.1035) * dolarKuru;
        const tl = gram * gramFiyat;
        const dolar = tl / dolarKuru;
        
        // Otomatik hesaplanan deÄŸerleri de formatla
        document.getElementById('tlInput').value = formatTLNumber(tl);
        document.getElementById('dolarInput').value = formatDolarNumber(dolar);
    }
    updatePredictions();
}

function calculateFromDolar() {
    manualInput = 'dolar';
    const dolar = parseFormattedNumber(document.getElementById('dolarInput').value);
    const onsFiyat = parseFormattedNumber(document.getElementById('onsFiyat').value);
    const dolarKuru = parseFormattedNumber(document.getElementById('dolarKuru').value);
    
    // Renk kodlarÄ±
    document.getElementById('tlInput').className = 'auto-calculated';
    document.getElementById('gramInput').className = 'auto-calculated';
    document.getElementById('dolarInput').className = 'manual-dollar';
    
    if (!isNaN(dolar) && !isNaN(onsFiyat) && !isNaN(dolarKuru)) {
        const tl = dolar * dolarKuru;
        const gramFiyat = (onsFiyat / 31.1035) * dolarKuru;
        const gram = tl / gramFiyat;
        
        // Otomatik hesaplanan deÄŸerleri de formatla
        document.getElementById('tlInput').value = formatTLNumber(tl);
        document.getElementById('gramInput').value = formatGramNumber(gram);
    }
    updatePredictions();
}

// YardÄ±mcÄ± formatlama fonksiyonlarÄ±
function formatTLNumber(amount) {
    let parts = amount.toFixed(2).split('.');
    parts[0] = parts[0].replace(/\B(?=(\d{3})+(?!\d))/g, ".");
    return parts.join(',');
}

function formatGramNumber(amount) {
    let parts = amount.toFixed(4).split('.');
    parts[0] = parts[0].replace(/\B(?=(\d{3})+(?!\d))/g, ".");
    return parts.join(',');
}

function formatDolarNumber(amount) {
    let parts = amount.toFixed(2).split('.');
    parts[0] = parts[0].replace(/\B(?=(\d{3})+(?!\d))/g, ".");
    return parts.join(',');
}
        
        
        function updatePredictions() {
    const gram = parseFormattedNumber(document.getElementById('gramInput').value);
    const dolarMiktar = parseFormattedNumber(document.getElementById('dolarInput').value);
    const mevcutTL = parseFormattedNumber(document.getElementById('tlInput').value);
    
    const onsFiyat = parseFormattedNumber(document.getElementById('onsFiyat').value);
    const dolarKuru = parseFormattedNumber(document.getElementById('dolarKuru').value);
    const tahminOnsFiyat = parseFormattedNumber(document.getElementById('tahminOnsFiyat').value);
    const tahminDolarKuru = parseFormattedNumber(document.getElementById('tahminDolarKuru').value);
    
    if (!isNaN(gram) && !isNaN(dolarMiktar) && !isNaN(mevcutTL) && 
        !isNaN(onsFiyat) && !isNaN(dolarKuru) && 
        !isNaN(tahminOnsFiyat) && !isNaN(tahminDolarKuru)) {
        
        // Yeni deÄŸerler
        const yeniGramFiyat = (tahminOnsFiyat / 31.1035) * tahminDolarKuru;
        const altinYeniDeger = gram * yeniGramFiyat;
        const dolarYeniDeger = dolarMiktar * tahminDolarKuru;
        
        // DeÄŸiÅŸim yÃ¼zdeleri
        const altinDegisim = ((altinYeniDeger - mevcutTL) / mevcutTL) * 100;
        const dolarDegisim = ((dolarYeniDeger - mevcutTL) / mevcutTL) * 100;
        
        // SonuÃ§larÄ± gÃ¶ster (yÃ¼zdelere binlik ayÄ±racÄ± ekle)
        document.getElementById('altinTahminDeger').textContent = formatMoney(altinYeniDeger);
        document.getElementById('altinDegisim').textContent = '%' + formatYuzdeNumber(altinDegisim);
        document.getElementById('altinDegisim').className = `result-value ${altinDegisim >= 0 ? 'change-positive' : 'change-negative'}`;
        
        document.getElementById('dolarTahminDeger').textContent = formatMoney(dolarYeniDeger);
        document.getElementById('dolarDegisim').textContent = '%' + formatYuzdeNumber(dolarDegisim);
        document.getElementById('dolarDegisim').className = `result-value ${dolarDegisim >= 0 ? 'change-positive' : 'change-negative'}`;
    }
}

// YÃ¼zde deÄŸerleri iÃ§in binlik ayÄ±racÄ± formatlama fonksiyonu
function formatYuzdeNumber(number) {
    // Ã–nce sayÄ±yÄ± 2 ondalÄ±k basamaÄŸa yuvarla
    const rounded = Math.abs(number).toFixed(2);
    
    // Tam ve ondalÄ±k kÄ±sÄ±mlarÄ± ayÄ±r
    const parts = rounded.split('.');
    let integerPart = parts[0];
    const decimalPart = parts[1];
    
    // Binlik ayÄ±racÄ± ekle
    integerPart = integerPart.replace(/\B(?=(\d{3})+(?!\d))/g, ".");
    
    // Negatif sayÄ±lar iÃ§in eksi iÅŸareni ekle
    const sign = number < 0 ? '-' : '';
    
    return sign + integerPart + ',' + decimalPart;
}
        function formatTLNumber(amount) {
            // TL formatÄ±na Ã§evir (binlik ayraÃ§: . , ondalÄ±k ayraÃ§: ,)
            return amount.toFixed(2)
                .replace('.', ',')
                .replace(/\B(?=(\d{3})+(?!\d))/g, ".");
        }

        function formatMoney(amount) {
            return new Intl.NumberFormat('tr-TR', {
                minimumFractionDigits: 2,
                maximumFractionDigits: 2
            }).format(amount) + " TL";
        }

        // Sayfa yÃ¼klendiÄŸinde Ã¶rnek deÄŸerleri yÃ¼kle
        window.onload = function () {
            document.getElementById('onsFiyat').value = '1';
            document.getElementById('dolarKuru').value = '1';
            document.getElementById('tahminOnsFiyat').value = '1';
            document.getElementById('tahminDolarKuru').value = '1';
            document.getElementById('tlInput').value = '10.000';
            updateGramAltinFiyati();
            calculateFromTL();
        };
    </script>
</body>

</html>